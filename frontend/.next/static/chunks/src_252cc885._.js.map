{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sousa/workspace/Exercicios/Desafios%20T%C3%A9cnicos/vaga%20dev%20jr%20b4you/api-produtos/frontend/src/utils/api.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst api = axios.create({\r\n    baseURL: 'http://localhost:3333'\r\n});\r\n\r\napi.interceptors.request.use((config) => {\r\n    const token = localStorage.getItem('token');\r\n    if(token) {\r\n        config.headers.Authorization = `Bearer ${token}`\r\n    }\r\n\r\n    return config;\r\n});\r\n\r\nexport default api;"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACrB,SAAS;AACb;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC1B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAG,OAAO;QACN,OAAO,OAAO,CAAC,aAAa,GAAG,AAAC,UAAe,OAAN;IAC7C;IAEA,OAAO;AACX;uCAEe","debugId":null}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sousa/workspace/Exercicios/Desafios%20T%C3%A9cnicos/vaga%20dev%20jr%20b4you/api-produtos/frontend/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport api from '@/utils/api';\n\ntype Product = {\n  id: number;\n  title: string;\n  description: string;\n  price: number;\n  image_url: string;\n};\n\nexport default function Home() {\n  const router = useRouter();\n\n  // Estados para lista e modal\n  const [products, setProducts] = useState<Product[]>([]);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingProduct, setEditingProduct] = useState<Product | null>(null);\n  const [alertMessage, setAlertMessage] = useState('');\n\n  // Estados do formulário\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [price, setPrice] = useState('');\n  const [imageUrl, setImageUrl] = useState('');\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      router.push('/login');\n      return;\n    }\n\n    loadProducts();\n  }, []);\n\n  // Log out\n  const handleLogout = () => {\n    localStorage.removeItem('token')\n    router.push('/login')\n  }\n\n  async function loadProducts() {\n    try {\n      const res = await api.get('/products');\n      setProducts(res.data.products);\n    } catch (err) {\n      console.error(err);\n      router.push('/login');\n    }\n  }\n\n  function openCreateModal() {\n    setEditingProduct(null);\n    setTitle('');\n    setDescription('');\n    setPrice('');\n    setImageUrl('');\n    setIsModalOpen(true);\n  }\n\n  function openEditModal(product: Product) {\n    setEditingProduct(product);\n    setTitle(product.title);\n    setDescription(product.description);\n    setPrice(product.price.toString());\n    setImageUrl(product.image_url);\n    setIsModalOpen(true);\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    try {\n      if (editingProduct) {\n        // Editar produto\n        await api.put(`/products/${editingProduct.id}`, {\n          title,\n          description,\n          price: parseFloat(price),\n          image_url: imageUrl,\n        });\n        setAlertMessage('Produto atualizado com sucesso!');\n      } else {\n        // Criar produto\n        await api.post('/products', {\n          title,\n          description,\n          price: parseFloat(price),\n          image_url: imageUrl,\n        });\n        setAlertMessage('Produto criado com sucesso!');\n      }\n\n      setIsModalOpen(false);\n      loadProducts();\n    } catch (err) {\n      console.error('Erro ao salvar produto:', err);\n    }\n  };\n\n  const handleDelete = async (id: number) => {\n    if (!confirm('Tem certeza que quer excluir esse produto?')) return;\n\n    try {\n      await api.delete(`/products/${id}`);\n      setAlertMessage('Produto excluído com sucesso!');\n      loadProducts();\n    } catch (err) {\n      console.error('Erro ao excluir produto:', err);\n    }\n  };\n\n  return (\n    <div className=\"p-4\">\n      <h1 className=\"text-xl font-bold mb-4\">Produtos</h1>\n\n      <div className=\"flex justify-end mb-4\">\n        <Button onClick={handleLogout} variant=\"destructive\">\n          Sair\n        </Button>\n      </div>\n\n      {alertMessage && (\n        <div\n          className=\"mb-4 p-3 bg-green-200 text-green-900 rounded\"\n          role=\"alert\"\n          onAnimationEnd={() => setAlertMessage('')}\n          style={{ animation: 'fadeOut 3s forwards' }}\n        >\n          {alertMessage}\n        </div>\n      )}\n\n      <button\n        onClick={openCreateModal}\n        className=\"mb-4 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition\"\n      >\n        Novo Produto\n      </button>\n\n      {isModalOpen && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg w-full max-w-md shadow-lg relative\">\n            <button\n              onClick={() => setIsModalOpen(false)}\n              className=\"absolute top-3 right-3 text-gray-600 hover:text-gray-900 text-2xl font-bold\"\n              aria-label=\"Fechar modal\"\n            >\n              ×\n            </button>\n\n            <form onSubmit={handleSubmit} className=\"grid grid-cols-1 gap-4\">\n              <input\n                type=\"text\"\n                placeholder=\"Título\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n                className=\"border p-2 rounded\"\n                required\n              />\n              <input\n                type=\"text\"\n                placeholder=\"Descrição\"\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                className=\"border p-2 rounded\"\n              />\n              <input\n                type=\"number\"\n                placeholder=\"Preço\"\n                value={price}\n                onChange={(e) => setPrice(e.target.value)}\n                className=\"border p-2 rounded\"\n                required\n                step=\"0.01\"\n              />\n              <input\n                type=\"text\"\n                placeholder=\"URL da imagem\"\n                value={imageUrl}\n                onChange={(e) => setImageUrl(e.target.value)}\n                className=\"border p-2 rounded\"\n              />\n              <button\n                type=\"submit\"\n                className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition\"\n              >\n                {editingProduct ? 'Salvar alterações' : 'Criar Produto'}\n              </button>\n            </form>\n          </div>\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {products.map((product) => (\n          <div key={product.id} className=\"border p-4 rounded-xl shadow-md\">\n            <h2 className=\"font-semibold\">{product.title}</h2>\n            <p>{product.description}</p>\n            <p>R$ {product.price.toFixed(2)}</p>\n            {product.image_url && (\n              <img\n                src={product.image_url}\n                alt={product.title}\n                className=\"mt-2 w-full h-40 object-cover\"\n              />\n            )}\n\n            <div className=\"flex gap-2 mt-2\">\n              <button\n                onClick={() => openEditModal(product)}\n                className=\"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition\"\n              >\n                Editar\n              </button>\n              <button\n                onClick={() => handleDelete(product.id)}\n                className=\"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition\"\n              >\n                Excluir\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}